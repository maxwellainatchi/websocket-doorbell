<html>
    <head>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io();
            var bellMode = false;
            var ring = function() {
                console.log("Ring");
                socket.emit("ring");
            }
            var emitRing = function() {
                if (!bellMode) { return; }
                console.log("Bell Ring");
                let audio = document.getElementById("bellAudio");
                setTimeout(function() {
                    audio.pause();
                }, 3000);
                audio.pause();
                audio.play();
            }

            socket.on("ring bell", emitRing);
        </script>
        <style>
            .outer {
                display: table;
                position: absolute;
                height: 100%;
                width: 100%;
            }

            .middle {
                display: table-cell;
                vertical-align: middle;
            }

            .inner {
                margin-left: auto;
                margin-right: auto;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <button id="bellModeToggle" onclick="bellMode = !bellMode">Toggle Bell Mode</button>
        <div class="outer">
            <div class="middle">
                <div class="inner">
                    <button style="width: 100%; height: 60vh;" onclick="ring()">Ring Bell</button>
                </div>
            </div>
        </div>
        <audio id="bellAudio">
            <source src="/bellAudio" type="audio/mp3"/>
        </audio>
    </body>
</html>